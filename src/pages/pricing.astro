---
import Layout from "@/layouts/Layout.astro";
import Container from "@/components/container.astro";
import Sectionhead from "@/components/sectionhead.astro";
import PricingCard from "@/components/pricing.astro";
import HospitalGallery from "@/components/HospitalGallery.astro";
import PageHero from "@/components/PageHero.astro";
import { getEntry } from 'astro:content';

const pricingData = await getEntry('pricing', 'index');

// Transform Keystatic data to match PricingCard component expectations
const pricing = pricingData.data.pricingCards.map(card => ({
  name: card.name,
  price: card.price,
  popular: card.popular,
  features: card.features,
  button: {
    text: card.buttonText,
    link: card.buttonLink,
  },
}));
---

<Layout title="Pricing">
  <PageHero 
    page="pricing" 
    title={pricingData.data.heroTitle} 
    description={pricingData.data.heroDescription}
  />
  <Container>
    <div class="flex flex-col gap-3 mx-auto max-w-4xl mt-8 mb-12">
      <div class="bg-blue-50 p-6 rounded-lg">
        <h3 class="font-bold text-lg text-gray-800 mb-3">{pricingData.data.additionalServicesTitle}</h3>
        <div class="grid md:grid-cols-2 gap-4">
          <div>
            <h4 class="font-semibold text-gray-700">{pricingData.data.laboratoryTitle}</h4>
            <p class="text-sm text-slate-600">{pricingData.data.laboratoryDescription}</p>
          </div>
          <div>
            <h4 class="font-semibold text-gray-700">{pricingData.data.radiologyTitle}</h4>
            <p class="text-sm text-slate-600">{pricingData.data.radiologyDescription}</p>
          </div>
          <div>
            <h4 class="font-semibold text-gray-700">{pricingData.data.pharmacyTitle}</h4>
            <p class="text-sm text-slate-600">{pricingData.data.pharmacyDescription}</p>
          </div>
          <div>
            <h4 class="font-semibold text-gray-700">{pricingData.data.surgeryTitle}</h4>
            <p class="text-sm text-slate-600">{pricingData.data.surgeryDescription}</p>
          </div>
        </div>
        <p class="text-sm text-slate-500 mt-4">{pricingData.data.priceDisclaimer}</p>
      </div>
    </div>

    <div
      class="grid md:grid-cols-3 gap-10 mx-auto max-w-(--breakpoint-lg) mt-12">
      {pricing.map((item) => <PricingCard plan={item} />)}
    </div>
    
    <HospitalGallery />
  </Container>
</Layout>
